@model RunTracker.Models.ChartViewModel


@{
    ViewData["Title"] = "Home Page";
    Layout = "_ChartLayout";
}



<h3>@ViewBag.Name</h3>

<div class="row">
    <div class="col-md-6">
        @if (Model.Runs.Any())
        {
            <div class="well well-sm">Total Mileage: @Model.User.GetTotalMileage()</div>
            <div class="well well-sm">Fastest Run: @Model.User.GetFastest()</div>
            <div class="well well-sm">Farthest Run: @Model.User.GetFarthest()</div>
        }
        else
        {
            <div class="well well-sm">No runs logged, get out there!</div>
        }
    </div>
    <div class="col-md-6"></div>
</div>
<form asp-action="Index">
    <div class="btn-toolbar">
        <div class="btn-group">
            <select asp-for="SelectedYear" class="dropdown" asp-items="ViewBag.Years"><option>@Model.CurrentDate.Year</option></select>
            <select asp-for="SelectedMonth" class="dropdown" asp-items="ViewBag.Months"><option>@Model.CurrentDate.Month</option></select>
        </div>
        <div class="btn-group">
            <input type="submit" class="btn btn-xs btn-info" value="Select" />
        </div>
        <div class="btn-group">
            <a asp-area="" asp-controller="Home" asp-route-id=1 asp-action="Index" class="btn btn-xs btn-success">Show All</a>
        </div>
    </div>
</form>

<div class="pull-right">
    <label class="label label-danger">Distance</label>
    <label class="label label-success">Pace</label>
</div>

<div class="ct-chart run_frequency"></div>

<!-- Draw chart --> 
<script type="text/javascript">

    var dist = [];
    var date = [];
    var pace = [];

    // Tranfer data from model to javascrip array
    @foreach(Run r in Model.Runs)
    {
        @:date.push("@r.Date.ToString("MM/dd/yy")");
        @:dist.push("@r.Distance");
        @:pace.push("@r.PaceDouble");
    }

    var data = {
        labels: date,
        series: [dist, pace]
    };

    var options = {
        showPoint: false,
        height: 250
    };

    new Chartist.Line('.ct-chart', data, options);
</script>